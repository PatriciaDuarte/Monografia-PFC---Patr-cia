\section{Considerações iniciais}

Este capítulo explora metodologias existentes na literatura para a detecção e contagem de árvores. Primeiramente é descrito o tipo de imagem pesquisada, em seguida a espécie da árvore, as técnicas usadas e o desempenho destas. As principais categorias de métodos para detecção e contagem de árvores são: baseados em \textit{template}; baseados em segmentação; baseados na detecção de picos; baseados em redes neurais convolucionais profundas; e métodos em detecção de blobs (regiões), agrupamento e classificação.


\sergio{FAZER TABELA!! Na Tabela~\ref{} nos sumarizamos as pesquisas identificadas, especificando o tipo de imagem, , as espécies de árvores, o método principal de detecção. Mais detalhes de cada trabalho são dados nas seções a seguir.}

\section{Métodos baseados em \textit{template}}

Métodos de casamento de template~\cite{Gonzalez2007,Vibha2009,Maillard2016}, constroem uma série de modelos para caracterizar os aspectos de árvores, levando em consideração a geometria da copa e propriedades radiométricas. Uma vez construídos os \textit{templates} um procedimento de janela deslizante é implementado para buscar os melhores casamentos, isto é, os locais de maiores probabilidades de existência de árvores. 

\citeonline{Gonzalez2007} usa imagens de satélite QuickBird de alta resolução do Sul da Espanha para a contagem de Oliveiras. O método consiste da detecção de bordas através do operador Canny e computação do centroide de cada objeto através da transformada da distância de Chamfer. Os autores também classificam os candidatos à árvores de Oliveira através de um método probabilístico baseado em \textit{template}. A precisão do método na detecção de plantas é 99.25\%.  O resultado é um conjunto de pontos que estima o centro da copa das árvores.

\citeonline{Vibha2009} utiliza imagens de satélite QuickBird para a contagem de palmeiras de Mysore, estado de Karnataka, Índia. A técnica empregada usa a filtragem da mediana para eliminar ruídos, limiarização automática e um método de casamento de árvore baseado em modelo (\textit{template}). A taxa de precisão média da contagem foi de 88\%.

\citeonline{Maillard2016} usa imagens de satélite coletadas via Google Earth. Foi desenvolvido um algoritmo baseado em \textit{template} que inclui propriedades geométricas e ópticas.  Os tipos de plantas que foram estudadas são nogueiras, laranjeiras, mangueiras e macieiras. Para nogueiras, laranjeiras e mangueiras obtiveram uma taxa de precisão superior a 90\%, já para macieiras a taxa de precisão foi abaixo de 75\%.

\section{Métodos baseados em filtragem máxima local}

Métodos de filtragem máxima local são usados para detectar picos locais, dados por uma alta saturação de verde normalmente encontrada no interior das copas das árvores. Tal procedimento é aplicado por um mecanismo de janela deslizante através de uma convolução por uma máscara numérica de tamanho específico. Neste caso, o intuito da convolução é produzir valores mais altos para picos no plano da imagem. Na aplicação deste, o plano da imagem é considerado como um relevo;  isto pode ser dado diretamente através de sensores especiais tais como sensores de distância (ex., sensores a laser), através de  cálculos como de densidade de vegetação, ou de transformada de imagem. Este procedimento de filtragem também pode ser invertido para detectar mínimos locais ao invés de máximo. Vários trabalhos empregam esta técnica para a detecção e contagem de árvores~\cite{recio2013, franco2013,Srestasathiern2014, Li2017}.


Filtragem máxima local é empregada em um grande número de trabalhos de detecção e contagem de árvores. 
\citeonline{wulder2004} usa imagens de satélite IKONOS e MEIS II, da ilha de Vancouver, estado de British Columbia, Canada, para a contagem de árvore Abeto-de-Douglas e Cedro Vermelho Ocidental. A técnica usada para a detecção das árvores foi a de filtragem máxima local. Usando imagens de satélite IKONOS teve-se 85\% de precisão enquanto que usando imagens de satélite  MEIS II teve-se  67\% de precisão.

\citeonline{Disperati2007} usa imagens de fotografias aéreas para a contagem de \textit{Pinus elliottii} na Floresta Nacional de Irati, Paraná.  Para a contagem os autores empregam a técnica de filtragem local máxima, onde os autores investigaram o influência do tamanho de máscaras do filtro em função da resolução das imagens. Com as imagens de maior resolução, de 600 dpi, foram obtidos o melhor resultado, sendo este de 97\% de precisão.

\citeonline{Gebreslasie2011} usa imagens de satélite para a contagem de árvores de Eucalipto em KwaZulu-Natal, Africa do Sul. Os autores aplicam suavização gaussiana e filtragem máxima local. A taxa de precisão obtida foi de 85\%. 

\citeonline{Katoh2012} utiliza imagens multiespectrais (RGB e infravermelho) de alta resolução de árvores coníferas de cinco espécies do Japão, captadas por um avião. Os autores combinam uma técnica de delineação da coroa das árvores, baseada na detecção de vales, com uma técnica de detecção do topo das árvores baseada em filtragem máxima local. A precisão da contagem de árvores é de 84\%.

\citeonline{recio2013} usa imagens de satélite de alta resolução para a contagem de citros em Valência-Espanha. O método desenvolvido contém os seguintes passos: suavização de imagem por um filtro da média ponderada, classificação não-superviosionada com o algoritmo k-means, identificação das regiões correspondentes a árvores por um algoritmo de classificação baseado em regra que usa características espectrais, individualização das árvores usando transformada da distância e filtragem máxima local. O melhor resultado dos autores foi 95.96\%. Este trabalho também calcula outras medidas da plantação como taxa de cobertura do solo, delimitação da área da copa das árvores, entre outras.

\citeonline{franco2013} usa imagens de satélite GeoEye-1 de Massafra, Província de Taranto, no Sul da Itália, para a contagem de citros. O método proposta aplica um filtro de suavização anisotrópico, filtro de mínimo local, filtragem falsos positivos baseados em um cálculo de homogeneizada de informação referente à vegetação em torno de um dado pixel, e agregação espacial de pontos mínimos próximos que correspondem a uma mesma planta. o melhor resultado foram para plantas com espaçamento $5 \times 5$, obtendo 98.3\% de taxa de detecção.

\citeonline{Sresta2014} usa imagens do satélite QuickBird, as quais são multiespectrais e de alta resolução, para a detecção e contagem de dendezeiros na Tailândia. O método desenvolvido usa um índice de vegetação para diferenciar os dendezeiros do plano de fundo da imagem. Em seguida é aplicado um algoritmo de transformação de ranking, seleção de características e análise de semi-variograma. Posteriormente picos locais são identificados usando o algoritmo de supressão não maximal, que é um método análogo à filtragem máxima local. O método obteve 90\% de precisão. 

\section{Métodos baseados em segmentação}

Alguns trabalhos têm empregado a metodologia de segmentação por crescimento de regiões, sendo segmentação por \textit{watershed} a técnica mais usada. \citeonline{koch2006} apresenta uma abordagem para detecção de árvores individuais usando dados obtidos com tecnologia laser a partir de sensores LIDAR instalados em aeronaves. A região de estudo é localizada em Freibug, Alemanha onde há três espécie de árvore, Carvalho Inglês, Carvalho Vermelho e Maple Norueguês. O método desenvolvido calcula um modelo de altura de copa, aplicada uma suavização gaussiana, filtragem máxima local para detectar o pontos máximos locais e por fim aplica um algoritmo que denominado Pouring que segue um conceito de espalhamento de líquido, sendo similar ao inverso do procedimento do algoritmo de inundação (\textit{watershed}). Os autores obteve até 87.3\% de classificação correta para uma dada imagem. 

Uma outra abordagem utilizada é a segmentação baseada em grafo. O trabalho de \citeonline{strimbu2015} usa imagens obtidas com técnicas laser com sensor LIDAR em aviões para a contagem de três espécies de Pinus. Os autores propuseram um método de segmentação baseado em grafo que quantifica a estrutura topologia da vegetação da floresta em um grafo ponderado e particiona o grafo para segmentar as árvores individuais. A principal contribuição é o desenvolvimento de uma abordagem topológica baseada em várias critérios de coesão do grafo. A taxa de detecção reportada varia de 87\% à 100\% dependendo do tipo da densidade da floresta.

\citeonline{Kestur2018} utiliza imagens de alta resolução espacial de veículos aéreos não tripulados (VANTs) de características distintas (de asas fixas e multirotor). Classificação supervisionada é realizada usando máquina de aprendizagem extrema (MAE), que usa valores RGB como entrada e produz um valor binário para cada pixel como saída (árvore ou não-árvore). Para corrigir a classificação errônea de pixel de não-árvore como pixel de árvore os autores empregam uma classificação espacial baseada em propriedades geométricas. A delineação e contagem de árvore é feita através da aplicação do algoritmo \textit(watershed). Os autores aplicaram o método em plantações de manga, banana e coqueiros da Índia e em comparação com um método baseado no algoritmo de agrupamento das k-médias (k-means), conclui que o método proposto baseado em MAE produziu resultados mais precisos.


\section{Redes neurais convolucionais}

Técnicas recentes de aprendizagem profunda tem sido empregadas com sucesso em alguns trabalhos. \cite{Li2017} também usa imagens do satélite QuickBird multiespectrais e de alta resolução para a detecção e contagem de dendezeiros. Neste trabalho as imagens empregadas são da Malásia. Os autores apresentaram um framework de aprendizagem profunda para detecção e contagem de plantas. Eles usaram um conjunto de amostras manualmente rotuladas para treinar e otimizar uma rede neural convolucional. Em seguida foram preditos rótulos para  amostras da base de dados tomadas através de uma técnica de janela deslizante. Em seguida as coordenadas correspondentes à mesma árvore foram combinadas para obter o resultado de detecção final. A precisão obtida foi de 96\%.

\cite{Puttemans2018} compara três arquiteturas para a detecção e classificação de coqueiros em imagens aéreas de alta resolução. uma cascata sugerida por Viola e Jones, a arquitetura proposta por Dollár baseado em um conceito de agregação ou integração de características e uma arquitetura de aprendizado profundo. Os melhores resultados foram obtidos por aprendizagem profunda com 97.4\% de acurácia, seguido pela técnica em cascata com 94.56\% de acurácia. O local da plantação não é mencionado.

%Detection of Individual Tree Crowns in Airborne Lidar Data – Koch 2006
%(Detecção de copas de árvores individuais em dados aéreos de Lidar )
%Segundo \citeonline{koch2006}, as imagens estudadas em seu trabalho foram capturadas através da base de dados do Lidar aéreo. O foco deste artigo foi efetuar detecção de copas e altura das árvores, e o tipo delas é árvores coníferas. O estudo delas foi feito para saber se a estrutura delas é adequada,foi mencionado que essas informações são importantes na área de Engenharia Florestal. As implementações foram feitas na linguagem C++. Eles usaram suavização gaussiana para separar a diferença do tamanho das árvores. Já para detectar a coroa das árvores, foi usado o filtro máximo local. Por fim, 87,3\% das árvores são detectadas corretamente ou satisfatórias.





%\begin{equation}
%    DP = \frac{100 \ X \ TP}{TP + TN}  
%\end{equation}
%\begin{equation}
%    BF = \frac{100 \ X \ FP}{TP + FP}
%\end{equation}
%onde,

%TP = Verdadeiro positivo ou árvores corretamente identificadas pelo usuário e através do procedimento automático;

%FP = Falso positivo ou árvores identificadas pela abordagem automática, mas não pela do utilizador;

%TN = Verdadeiro negativo ou árvores identificadas pelo usuário, mas não através do procedimento automático.

%A precisão planimétrica dos centróides de árvores decorrentes do filtro de suavização assimétrico proposto também foi avaliada pelo Root Mean Square Error (RMSE), sem incluir árvores erroneamente identificadas (erros de comissão). Essa avaliação foi feita assumindo que as medidas obtidas pelo usuário eram precisas e considerando-as como referência no cálculo do RMSE para avaliação à distância:
%\begin{equation}
%    RMSE = \sqrt{\frac{\sum_{i=1}^{n}(D_{m,i} - D_{r,i})^{2}}{n}}
%\end{equation}
%onde,

%n =  número de observações de referência;

%$D_{r,i}$ = observações obtidas pelo usuário;

%$D_{m,i}$ = observações obtidas através do procedimento.



\section{Outros Métodos}

No trabalho de \citeonline{Reis2007} foram usadas imagens de alta resolução para fazer contagem de Eucalyptus ssp. Primeiramente, foi aplicado o filtro de Lee e em seguida o classificador não-supervisionado ISODATA. Em seguida a classificação do ISODATa foi checado com o auxílio de um sistema de Informações Geográficas (SIG). A abordagem obteve 93.58\% de acerto.

\citeonline{Daliakopoulos2009} usa imagens de satélite multiespectral de alta resolução captadas pelo satélite QuickBird, para a contagem de fruteiras em Keritis, na Ilha de Creta. O método consiste de uma combinação da banda vermelha com o índice de vegetação NDVI, limiarização e a aplicação do método de detecção  de regiões (blobs) denominado Laplaciano da Gaussiana. A precisão médio na contagem de árvore na melhor combinação do método foi de 94.1\%.

\citeonline{Bazi2009} propuseram um método automático para a contagem de oliveiras em imagens de alta resolução coletadas pelo satélite IKONOS-2. Primeiramente as Oliveiras são separadas de outras classes de cobertura presente na imagem usando um classificador Gaussiano. Este classificador é alimentado com características morfológicas extraídas das imagens. A saída deste classificador é um mapa binário contendo pixels de Oliveiras como objeto (valor 1) e pixels de outras classes como plano de fundo (valor 0). Em seguida o número de regiões (\textit{blobs}) que são cujo tamanho estão dentro de um intervalo são contadas. A precisão da contagem de árvores de Oliveiras foi de 96\%.

\citeonline{Bazi2014} desenvolveu um método para a contagem palmeiras em imagens captadas usando um VANT. Primeiramente é extraído um conjunto de pontos-chave usando o método \textit{Scale Invariant Feature Transform} (SIFT). Em seguida este pontos são classificados pelo  método de Extreme Learning Machine (ELM) em palmeiras e não palmeiras. Para capturar o contorno da copa das árvores os pontos-chave do método SIFT foram combinados um método de contornos ativos baseado em \textit{level-set}. Finalmente a textura das regiões delimitadas pelo método de \textit{level set} são analisadas usando padrões binários locais para distinguir palmeiras de outras vegetações. A acurácia de detecção de palmeiras foi de 91.11\%.

\citeonline{Rizeei2018} propuseram um método de análise baseada em objeto para estimar a idade e contar dendezeiros em imagens de satélite Worldview-3 e imagens aereas \textit{light detection and range} -- LiDAR. Os autores efetuam uma segmentação baseada em bordas, extraem atributos espectrais e detectam as palmeiras usando uma SVM. A estimação de altura das palmeiras foram feitas para as imagens LiDAR usando um modelo que estima a superfície e a copa das árvores, para em seguida calcular a distância entre estes.  O método obteve 98.80\% de precisão para a contagem de árvores, 84.91\% precisão para a predição da idade.

\section{Considerações finais}
Este capítulo abordou as metodologias existentes na literatura para a detecção e contagem de árvores. As principais categorias de métodos apresentadas foram: baseados em \textit{template}; baseados em segmentação; baseados na detecção de picos; baseados em redes neurais convolucionais profundas; e métodos em detecção de blobs (regiões), agrupamento e classificação. No  próximo capítulo será mostrada a metodologia e resultados iniciais desenvolvidos neste trabalho.